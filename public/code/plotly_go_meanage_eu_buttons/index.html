<html>
<head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <meta http-equiv="X-UA-Compatible" content="ie=edge">
     <link rel="stylesheet" href="/css/style.css"/>
     
     <title>Document</title>
</head>
<body>
    <div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 64
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 65
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 66
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 67
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 68
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 69
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 70
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 71
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 72
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 73
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 74
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 75
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 76
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 77
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 78
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 79
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 80
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 81
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 82
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 83
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 84
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 85
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 86
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 87
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 88
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 89
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 90
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 91
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 92
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 93
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 94
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 95
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 96
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 97
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 98
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 99
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">100
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">101
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">102
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">103
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">104
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">105
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">106
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">107
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">108
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">109
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">110
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">111
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">112
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">113
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">114
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">115
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">116
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">117
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">118
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">119
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">120
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">121
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">122
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">123
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">124
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">125
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">126
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">127
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">128
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">129
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">130
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">131
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">132
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">133
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">134
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">135
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">136
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">137
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">138
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">139
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">140
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">141
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">142
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">143
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">144
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">145
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">146
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">147
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">148
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">149
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">150
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">151
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">152
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">153
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">154
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">155
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">156
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">157
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">158
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">159
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">160
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">161
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">162
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">163
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">164
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">165
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">166
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">167
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">168
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">169
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">170
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">171
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">172
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">173
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">174
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">175
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">176
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">177
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">178
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">179
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">180
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">181
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">182
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">183
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">184
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">185
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">186
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">187
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">188
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">189
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">190
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">191
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">192
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">193
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">194
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">195
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">196
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">197
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">198
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">199
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">200
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">201
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">202
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">203
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">204
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">205
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">206
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">207
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">208
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">209
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">210
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">211
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">212
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">213
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">214
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">215
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">216
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">217
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">218
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">219
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">220
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">221
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">222
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">223
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">224
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">225
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">226
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">227
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">228
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">229
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">230
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">231
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">232
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">233
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">234
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">235
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">236
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">237
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">238
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">239
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">240
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">241
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">242
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">243
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">244
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">245
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">246
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">247
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">248
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">249
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">250
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">251
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">252
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">253
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">254
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">255
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">256
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">257
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">258
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">259
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">260
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">261
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">262
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">263
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">264
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">265
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">266
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">267
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">268
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">269
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">270
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">271
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">272
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">273
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">274
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">275
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">276
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">277
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">278
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">279
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">280
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">281
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">282
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">283
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">284
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">285
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">286
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">287
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">288
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">289
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">290
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">291
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">292
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">293
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">294
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">295
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">296
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py3" data-lang="py3"><span style="color:#a90d91">import</span> <span style="color:#000">pandas</span> <span style="color:#a90d91">as</span> <span style="color:#000">pd</span>
<span style="color:#a90d91">import</span> <span style="color:#000">plotly</span><span style="color:#000">.</span><span style="color:#000">graph_objects</span> <span style="color:#a90d91">as</span> <span style="color:#000">go</span>
<span style="color:#a90d91">from</span> <span style="color:#000">sys</span> <span style="color:#a90d91">import</span> <span style="color:#000">exit</span>

<span style="color:#000">colour_dict</span> <span style="color:#000">=</span> <span style="color:#a90d91">dict</span>({<span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">CON HOLD</span><span style="color:#c41a16">&#39;</span>:<span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">blue</span><span style="color:#c41a16">&#39;</span>,
                  <span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">CON GAIN</span><span style="color:#c41a16">&#39;</span>:<span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">aqua</span><span style="color:#c41a16">&#39;</span>,
                  <span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">LAB HOLD</span><span style="color:#c41a16">&#39;</span>: <span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">red</span><span style="color:#c41a16">&#39;</span>,
                  <span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">LAB GAIN</span><span style="color:#c41a16">&#39;</span>: <span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">violet</span><span style="color:#c41a16">&#39;</span>,
                  <span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">GRN HOLD</span><span style="color:#c41a16">&#39;</span>: <span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">green</span><span style="color:#c41a16">&#39;</span>,
                  <span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">DUP HOLD</span><span style="color:#c41a16">&#39;</span>: <span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">sandybrown</span><span style="color:#c41a16">&#39;</span>,
                  <span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">LD HOLD</span><span style="color:#c41a16">&#39;</span>: <span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">yellow</span><span style="color:#c41a16">&#39;</span>,
                  <span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">LD GAIN</span><span style="color:#c41a16">&#39;</span>: <span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">orange</span><span style="color:#c41a16">&#39;</span>,
                  <span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">SNP HOLD</span><span style="color:#c41a16">&#39;</span>: <span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">black</span><span style="color:#c41a16">&#39;</span>,
                  <span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">SNP GAIN</span><span style="color:#c41a16">&#39;</span>: <span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">gray</span><span style="color:#c41a16">&#39;</span>,
                  <span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">PC HOLD</span><span style="color:#c41a16">&#39;</span>: <span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">pink</span><span style="color:#c41a16">&#39;</span>,
                  <span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">SF HOLD</span><span style="color:#c41a16">&#39;</span>: <span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">peru</span><span style="color:#c41a16">&#39;</span>,
                  <span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">SF GAIN</span><span style="color:#c41a16">&#39;</span>: <span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">wheat</span><span style="color:#c41a16">&#39;</span>,
                  <span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">SDLP HOLD</span><span style="color:#c41a16">&#39;</span>: <span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">salmon</span><span style="color:#c41a16">&#39;</span>,
                  <span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">SDLP GAIN</span><span style="color:#c41a16">&#39;</span>: <span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">lightsalmon</span><span style="color:#c41a16">&#39;</span>,
                  <span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">APNI GAIN</span><span style="color:#c41a16">&#39;</span>: <span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">lawngreen</span><span style="color:#c41a16">&#39;</span>,
                  <span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">SPE HOLD</span><span style="color:#c41a16">&#39;</span>: <span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">navy</span><span style="color:#c41a16">&#39;</span>})

<span style="color:#000">df_age</span> <span style="color:#000">=</span> <span style="color:#000">pd</span><span style="color:#000">.</span><span style="color:#000">read_csv</span>(<span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">Age_by_year_data.csv</span><span style="color:#c41a16">&#39;</span>)
<span style="color:#000">df_con_head</span> <span style="color:#000">=</span> <span style="color:#000">pd</span><span style="color:#000">.</span><span style="color:#000">read_csv</span>(<span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">constituency_headline.csv</span><span style="color:#c41a16">&#39;</span>)
<span style="color:#000">df_con_eu</span> <span style="color:#000">=</span> <span style="color:#000">pd</span><span style="color:#000">.</span><span style="color:#000">read_csv</span>(<span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">eureferendum_constituency.csv</span><span style="color:#c41a16">&#39;</span>)
<span style="color:#000">df_regions</span> <span style="color:#000">=</span> <span style="color:#000">pd</span><span style="color:#000">.</span><span style="color:#000">read_csv</span>(<span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">HoC-2019GE-results-by-constituency.csv</span><span style="color:#c41a16">&#39;</span>)

<span style="color:#000">age_start</span> <span style="color:#000">=</span> <span style="color:#1c01ce">18</span>
<span style="color:#000">winning_party_list</span> <span style="color:#000">=</span> [<span style="color:#c41a16"></span><span style="color:#c41a16">&#34;</span><span style="color:#c41a16">LAB</span><span style="color:#c41a16">&#34;</span>, <span style="color:#c41a16"></span><span style="color:#c41a16">&#34;</span><span style="color:#c41a16">CON</span><span style="color:#c41a16">&#34;</span>]

<span style="color:#177500"># filter on party if required. Comment out to show all parties. If filtering, adjust legend order list accordingly.</span>
<span style="color:#177500"># This filter is for the result represented by the dots and can be for multiple parties.</span>
<span style="color:#000">df_con_head</span><span style="color:#000">.</span><span style="color:#000">query</span>(<span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">wp in @winning_party_list</span><span style="color:#c41a16">&#39;</span>, <span style="color:#000">inplace</span> <span style="color:#000">=</span> <span style="color:#a90d91">True</span>)

<span style="color:#177500"># first get required age range</span>
<span style="color:#000">df_age</span> <span style="color:#000">=</span> <span style="color:#000">df_age</span><span style="color:#000">.</span><span style="color:#000">query</span>(<span style="color:#c41a16"></span><span style="color:#c41a16">&#34;</span><span style="color:#c41a16">Age_year &gt;= </span><span style="color:#c41a16">&#34;</span> <span style="color:#000">+</span> <span style="color:#a90d91">str</span>(<span style="color:#000">age_start</span>))

<span style="color:#000">df_age_grp</span> <span style="color:#000">=</span> <span style="color:#000">df_age</span><span style="color:#000">.</span><span style="color:#000">groupby</span>(<span style="color:#c41a16"></span><span style="color:#c41a16">&#34;</span><span style="color:#c41a16">PCON11CD</span><span style="color:#c41a16">&#34;</span>)<span style="color:#000">.</span><span style="color:#000">apply</span>(<span style="color:#a90d91">lambda</span> <span style="color:#000">df</span>, <span style="color:#000">a</span>, <span style="color:#000">b</span>: <span style="color:#a90d91">sum</span>(<span style="color:#000">df</span>[<span style="color:#000">a</span>] <span style="color:#000">*</span> <span style="color:#000">df</span>[<span style="color:#000">b</span>]) <span style="color:#000">/</span> <span style="color:#a90d91">sum</span>(<span style="color:#000">df</span>[<span style="color:#000">b</span>]), <span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">Age_year</span><span style="color:#c41a16">&#39;</span>, <span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">Age_pop</span><span style="color:#c41a16">&#39;</span>)

<span style="color:#177500"># convert series to dataframe with same name</span>
<span style="color:#000">df_age_grp</span> <span style="color:#000">=</span> <span style="color:#000">df_age_grp</span><span style="color:#000">.</span><span style="color:#000">to_frame</span>()<span style="color:#000">.</span><span style="color:#000">reset_index</span>()

<span style="color:#177500"># give column a name</span>
<span style="color:#000">df_age_grp</span> <span style="color:#000">=</span> <span style="color:#000">df_age_grp</span><span style="color:#000">.</span><span style="color:#000">rename</span>(<span style="color:#000">columns</span><span style="color:#000">=</span> {<span style="color:#1c01ce">0</span>: <span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">mean_age</span><span style="color:#c41a16">&#39;</span>})

<span style="color:#177500"># join EU data with election headlines</span>
<span style="color:#000">df_eu_hd</span> <span style="color:#000">=</span> <span style="color:#000">df_con_eu</span><span style="color:#000">.</span><span style="color:#000">join</span>(<span style="color:#000">df_con_head</span><span style="color:#000">.</span><span style="color:#000">set_index</span>([<span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">ons</span><span style="color:#c41a16">&#39;</span>]), <span style="color:#000">on</span><span style="color:#000">=</span>[<span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">ons_code</span><span style="color:#c41a16">&#39;</span>], <span style="color:#000">how</span><span style="color:#000">=</span><span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">inner</span><span style="color:#c41a16">&#39;</span>)

<span style="color:#177500"># join the result with age data</span>
<span style="color:#000">df_age_eu</span> <span style="color:#000">=</span> <span style="color:#000">df_age_grp</span><span style="color:#000">.</span><span style="color:#000">join</span>(<span style="color:#000">df_eu_hd</span><span style="color:#000">.</span><span style="color:#000">set_index</span>([<span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">ons_code</span><span style="color:#c41a16">&#39;</span>]), <span style="color:#000">on</span><span style="color:#000">=</span>[<span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">PCON11CD</span><span style="color:#c41a16">&#39;</span>], <span style="color:#000">how</span><span style="color:#000">=</span><span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">inner</span><span style="color:#c41a16">&#39;</span>)

<span style="color:#177500"># replace WIN with HOLD (not clear how it differs)</span>
<span style="color:#000">df_age_eu</span>[<span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">headline</span><span style="color:#c41a16">&#39;</span>] <span style="color:#000">=</span> <span style="color:#000">df_age_eu</span>[<span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">flash</span><span style="color:#c41a16">&#39;</span>]<span style="color:#000">.</span><span style="color:#000">apply</span>(<span style="color:#a90d91">lambda</span> <span style="color:#000">x</span>: <span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16"> </span><span style="color:#c41a16">&#39;</span><span style="color:#000">.</span><span style="color:#000">join</span>(<span style="color:#000">x</span><span style="color:#000">.</span><span style="color:#000">split</span>()[:<span style="color:#1c01ce">2</span>]))<span style="color:#000">.</span><span style="color:#000">str</span><span style="color:#000">.</span><span style="color:#000">replace</span>(<span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">WIN</span><span style="color:#c41a16">&#39;</span>, <span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">HOLD</span><span style="color:#c41a16">&#39;</span>)

<span style="color:#177500"># remove % sign and convert to float</span>
<span style="color:#000">df_age_eu</span>[<span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">leave_to_use</span><span style="color:#c41a16">&#39;</span>] <span style="color:#000">=</span> <span style="color:#000">df_age_eu</span>[<span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">leave_to_use</span><span style="color:#c41a16">&#39;</span>]<span style="color:#000">.</span><span style="color:#000">str</span><span style="color:#000">.</span><span style="color:#000">rstrip</span>(<span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">%</span><span style="color:#c41a16">&#39;</span>)<span style="color:#000">.</span><span style="color:#000">astype</span>(<span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">float</span><span style="color:#c41a16">&#39;</span>) <span style="color:#000">/</span> <span style="color:#1c01ce">100.0</span>

<span style="color:#177500"># round percentages</span>
<span style="color:#000">decimals</span> <span style="color:#000">=</span> <span style="color:#1c01ce">1</span>    
<span style="color:#000">df_age_eu</span>[<span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">leave_to_use</span><span style="color:#c41a16">&#39;</span>] <span style="color:#000">=</span> <span style="color:#000">df_age_eu</span>[<span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">leave_to_use</span><span style="color:#c41a16">&#39;</span>]<span style="color:#000">.</span><span style="color:#000">apply</span>(<span style="color:#a90d91">lambda</span> <span style="color:#000">x</span>: <span style="color:#a90d91">round</span>(<span style="color:#000">x</span><span style="color:#000">*</span><span style="color:#1c01ce">100</span>, <span style="color:#000">decimals</span>))
<span style="color:#000">df_age_eu</span>[<span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">mean_age</span><span style="color:#c41a16">&#39;</span>] <span style="color:#000">=</span> <span style="color:#000">df_age_eu</span>[<span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">mean_age</span><span style="color:#c41a16">&#39;</span>]<span style="color:#000">.</span><span style="color:#000">apply</span>(<span style="color:#a90d91">lambda</span> <span style="color:#000">x</span>: <span style="color:#a90d91">round</span>(<span style="color:#000">x</span>, <span style="color:#000">decimals</span>))

<span style="color:#000">df_age_eu</span><span style="color:#000">.</span><span style="color:#000">rename</span>(<span style="color:#000">columns</span> <span style="color:#000">=</span> {<span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">constituency_name</span><span style="color:#c41a16">&#39;</span>:<span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">Constituency</span><span style="color:#c41a16">&#39;</span>}, <span style="color:#000">inplace</span> <span style="color:#000">=</span> <span style="color:#a90d91">True</span>) 

<span style="color:#a90d91">def</span> <span style="color:#000">get_color</span>(<span style="color:#000">row</span>):
    <span style="color:#a90d91">if</span> <span style="color:#000">row</span>[<span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">headline</span><span style="color:#c41a16">&#39;</span>] <span style="color:#000">==</span> <span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">LAB HOLD</span><span style="color:#c41a16">&#39;</span>:
        <span style="color:#000">col</span> <span style="color:#000">=</span> <span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">red</span><span style="color:#c41a16">&#39;</span>
    <span style="color:#a90d91">elif</span> <span style="color:#000">row</span>[<span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">headline</span><span style="color:#c41a16">&#39;</span>] <span style="color:#000">==</span> <span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">LAB GAIN</span><span style="color:#c41a16">&#39;</span>:
        <span style="color:#000">col</span> <span style="color:#000">=</span> <span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">violet</span><span style="color:#c41a16">&#39;</span>
    <span style="color:#a90d91">elif</span> <span style="color:#000">row</span>[<span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">headline</span><span style="color:#c41a16">&#39;</span>] <span style="color:#000">==</span> <span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">CON HOLD</span><span style="color:#c41a16">&#39;</span>:
        <span style="color:#000">col</span> <span style="color:#000">=</span> <span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">blue</span><span style="color:#c41a16">&#39;</span>
    <span style="color:#a90d91">else</span>:
        <span style="color:#000">col</span> <span style="color:#000">=</span> <span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">aqua</span><span style="color:#c41a16">&#39;</span>
    <span style="color:#a90d91">return</span> <span style="color:#000">col</span>    

<span style="color:#000">df_age_eu</span>[<span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">colour</span><span style="color:#c41a16">&#39;</span>] <span style="color:#000">=</span>  <span style="color:#000">df_age_eu</span><span style="color:#000">.</span><span style="color:#000">apply</span>(<span style="color:#000">get_color</span>, <span style="color:#000">axis</span><span style="color:#000">=</span><span style="color:#1c01ce">1</span>)

<span style="color:#177500"># variables for colorscale</span>
<span style="color:#000">color_names</span> <span style="color:#000">=</span> [<span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">CON GAIN</span><span style="color:#c41a16">&#39;</span>,<span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">CON HOLD</span><span style="color:#c41a16">&#39;</span>,<span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">LAB GAIN</span><span style="color:#c41a16">&#39;</span>,<span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">LAB HOLD</span><span style="color:#c41a16">&#39;</span>]
<span style="color:#000">color_vals</span> <span style="color:#000">=</span> <span style="color:#a90d91">list</span>(<span style="color:#a90d91">range</span>(<span style="color:#a90d91">len</span>(<span style="color:#000">color_names</span>)))
<span style="color:#000">num_colors</span> <span style="color:#000">=</span> <span style="color:#a90d91">len</span>(<span style="color:#000">color_vals</span>)

<span style="color:#177500"># map the interval [0, max_val] to [0,1] by t--&gt; t/max_val</span>
<span style="color:#177500"># see https://community.plot.ly/t/manually-customize-colorbar-scatter-python/18520</span>
<span style="color:#177500"># and https://community.plot.ly/t/colors-for-discrete-ranges-in-heatmaps/7780</span>

<span style="color:#177500"># displayed with highest number at top</span>
<span style="color:#000">colorscale</span> <span style="color:#000">=</span> [
    [<span style="color:#1c01ce">0</span>, <span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">aqua</span><span style="color:#c41a16">&#39;</span>],
    [<span style="color:#1c01ce">0.25</span>, <span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">aqua</span><span style="color:#c41a16">&#39;</span>],
    [<span style="color:#1c01ce">0.25</span>, <span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">blue</span><span style="color:#c41a16">&#39;</span>],
    [<span style="color:#1c01ce">0.5</span>, <span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">blue</span><span style="color:#c41a16">&#39;</span>],
    [<span style="color:#1c01ce">0.5</span>, <span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">violet</span><span style="color:#c41a16">&#39;</span>],
    [<span style="color:#1c01ce">0.75</span>, <span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">violet</span><span style="color:#c41a16">&#39;</span>],
    [<span style="color:#1c01ce">0.75</span>, <span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">red</span><span style="color:#c41a16">&#39;</span>],
    [<span style="color:#1c01ce">1</span>, <span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">red</span><span style="color:#c41a16">&#39;</span>]]
<span style="color:#000">cmin</span> <span style="color:#000">=</span> <span style="color:#000">-</span><span style="color:#1c01ce">0.5</span>
<span style="color:#000">cmax</span> <span style="color:#000">=</span> <span style="color:#000">num_colors</span> <span style="color:#000">-</span> <span style="color:#1c01ce">0.5</span>

<span style="color:#177500"># ONS regions</span>
<span style="color:#c41a16"></span><span style="color:#c41a16">&#34;&#34;&#34;</span><span style="color:#c41a16"></span><span style="color:#c41a16">
</span><span style="color:#c41a16"></span><span style="color:#c41a16">ons_region_id	region_name	CountOfons_id</span><span style="color:#c41a16">
</span><span style="color:#c41a16"></span><span style="color:#c41a16">E12000001	North East	29</span><span style="color:#c41a16">
</span><span style="color:#c41a16"></span><span style="color:#c41a16">E12000002	North West	75</span><span style="color:#c41a16">
</span><span style="color:#c41a16"></span><span style="color:#c41a16">E12000003	Yorkshire and The Humber	54</span><span style="color:#c41a16">
</span><span style="color:#c41a16"></span><span style="color:#c41a16">E12000004	East Midlands	46</span><span style="color:#c41a16">
</span><span style="color:#c41a16"></span><span style="color:#c41a16">E12000005	West Midlands	59</span><span style="color:#c41a16">
</span><span style="color:#c41a16"></span><span style="color:#c41a16">E12000006	East	58</span><span style="color:#c41a16">
</span><span style="color:#c41a16"></span><span style="color:#c41a16">E12000007	London	73</span><span style="color:#c41a16">
</span><span style="color:#c41a16"></span><span style="color:#c41a16">E12000008	South East	84</span><span style="color:#c41a16">
</span><span style="color:#c41a16"></span><span style="color:#c41a16">E12000009	South West	55</span><span style="color:#c41a16">
</span><span style="color:#c41a16"></span><span style="color:#c41a16">N92000002	Northern Ireland	18</span><span style="color:#c41a16">
</span><span style="color:#c41a16"></span><span style="color:#c41a16">S92000003	Scotland	59</span><span style="color:#c41a16">
</span><span style="color:#c41a16"></span><span style="color:#c41a16">W92000004	Wales	40</span><span style="color:#c41a16">
</span><span style="color:#c41a16"></span><span style="color:#c41a16">&#34;&#34;&#34;</span>

<span style="color:#177500"># join with regions data</span>
<span style="color:#000">df_age_eu</span> <span style="color:#000">=</span> <span style="color:#000">df_age_eu</span><span style="color:#000">.</span><span style="color:#000">join</span>(<span style="color:#000">df_regions</span><span style="color:#000">.</span><span style="color:#000">set_index</span>([<span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">ons_id</span><span style="color:#c41a16">&#39;</span>]), <span style="color:#000">on</span><span style="color:#000">=</span>[<span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">PCON11CD</span><span style="color:#c41a16">&#39;</span>], <span style="color:#000">how</span><span style="color:#000">=</span><span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">inner</span><span style="color:#c41a16">&#39;</span>)
<span style="color:#177500"># print(list(df_age_eu.columns))</span>
<span style="color:#177500"># exit(0)</span>

<span style="color:#177500"># Initialize figure</span>
<span style="color:#000">fig</span> <span style="color:#000">=</span> <span style="color:#000">go</span><span style="color:#000">.</span><span style="color:#000">Figure</span>()

<span style="color:#177500"># html for hover text</span>
<span style="color:#000">hvt</span> <span style="color:#000">=</span> <span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">&lt;b&gt;</span><span style="color:#c41a16">%</span><span style="color:#c41a16">{text}</span><span style="color:#c41a16">&lt;/b&gt;&lt;br&gt;&lt;b&gt;Mean age&lt;/b&gt;: </span><span style="color:#c41a16">%</span><span style="color:#c41a16">{x}</span><span style="color:#c41a16">&lt;br&gt;&lt;b&gt;Leave vote&lt;/b&gt;: </span><span style="color:#c41a16">%</span><span style="color:#c41a16">{y:.3n}</span><span style="color:#c41a16">%</span><span style="color:#c41a16">&lt;br&gt;&lt;b&gt;Last election&lt;/b&gt;: </span><span style="color:#c41a16">%</span><span style="color:#c41a16">{customdata}</span><span style="color:#c41a16">&lt;extra&gt;</span><span style="color:#c41a16">%</span><span style="color:#c41a16">&lt;/extra&gt;</span><span style="color:#c41a16">&#39;</span>

<span style="color:#177500"># variables for button position</span>
<span style="color:#000">button_layer_1_height</span> <span style="color:#000">=</span> <span style="color:#1c01ce">1.12</span>
<span style="color:#000">button_layer_2_height</span> <span style="color:#000">=</span> <span style="color:#1c01ce">1.065</span>

<span style="color:#177500"># list of buttons</span>
<span style="color:#000">btnlist</span> <span style="color:#000">=</span> []
<span style="color:#000">i</span><span style="color:#000">=</span><span style="color:#1c01ce">0</span>

<span style="color:#177500"># list of booleans specifying which trace is visible</span>
<span style="color:#000">vislist</span> <span style="color:#000">=</span> [<span style="color:#a90d91">False</span>] <span style="color:#000">*</span> <span style="color:#1c01ce">12</span>

<span style="color:#177500"># make trace for all regions visible initially</span>
<span style="color:#000">vislist</span>[<span style="color:#000">i</span>] <span style="color:#000">=</span> <span style="color:#a90d91">True</span>    

<span style="color:#177500"># first add trace for all regions</span>
<span style="color:#000">fig</span><span style="color:#000">.</span><span style="color:#000">add_trace</span>(
    <span style="color:#000">go</span><span style="color:#000">.</span><span style="color:#000">Scatter</span>(
        <span style="color:#000">x</span> <span style="color:#000">=</span> <span style="color:#000">df_age_eu</span>[<span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">mean_age</span><span style="color:#c41a16">&#39;</span>], 
        <span style="color:#000">y</span> <span style="color:#000">=</span> <span style="color:#000">df_age_eu</span>[<span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">leave_to_use</span><span style="color:#c41a16">&#39;</span>],
        <span style="color:#000">mode</span> <span style="color:#000">=</span> <span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">markers</span><span style="color:#c41a16">&#39;</span>, 
        <span style="color:#000">marker</span> <span style="color:#000">=</span> <span style="color:#a90d91">dict</span>(
            <span style="color:#000">colorbar</span> <span style="color:#000">=</span> <span style="color:#a90d91">dict</span>(
                <span style="color:#000">title</span><span style="color:#000">=</span><span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">Result</span><span style="color:#c41a16">&#39;</span>,
                <span style="color:#000">tickvals</span><span style="color:#000">=</span> <span style="color:#000">color_vals</span>,
                <span style="color:#000">ticktext</span><span style="color:#000">=</span> <span style="color:#000">color_names</span>,
                <span style="color:#000">tickfont</span><span style="color:#000">=</span><span style="color:#a90d91">dict</span>(<span style="color:#000">size</span><span style="color:#000">=</span><span style="color:#1c01ce">8</span>),
                <span style="color:#a90d91">len</span><span style="color:#000">=</span><span style="color:#1c01ce">0.2</span>
            ),
            <span style="color:#000">colorscale</span> <span style="color:#000">=</span> <span style="color:#000">colorscale</span>,
            <span style="color:#000">cmin</span><span style="color:#000">=</span><span style="color:#000">cmin</span>,
            <span style="color:#000">cmax</span><span style="color:#000">=</span><span style="color:#000">cmax</span>,
            <span style="color:#000">color</span> <span style="color:#000">=</span> <span style="color:#000">df_age_eu</span>[<span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">colour</span><span style="color:#c41a16">&#39;</span>],
            <span style="color:#000">showscale</span><span style="color:#000">=</span><span style="color:#a90d91">True</span>), 
        <span style="color:#000">text</span><span style="color:#000">=</span><span style="color:#000">df_age_eu</span>[<span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">Constituency</span><span style="color:#c41a16">&#39;</span>], 
        <span style="color:#000">hovertemplate</span><span style="color:#000">=</span><span style="color:#000">hvt</span>, 
        <span style="color:#000">customdata</span> <span style="color:#000">=</span> <span style="color:#000">df_age_eu</span>[<span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">wpp</span><span style="color:#c41a16">&#39;</span>],
        <span style="color:#000">showlegend</span><span style="color:#000">=</span><span style="color:#a90d91">False</span>
    )
)

<span style="color:#177500"># add new button to list</span>
<span style="color:#000">btnlist</span><span style="color:#000">.</span><span style="color:#000">append</span>(
    <span style="color:#a90d91">dict</span>(
        <span style="color:#000">args</span><span style="color:#000">=</span>[{<span style="color:#c41a16"></span><span style="color:#c41a16">&#34;</span><span style="color:#c41a16">visible</span><span style="color:#c41a16">&#34;</span>: <span style="color:#000">vislist</span>}],
        <span style="color:#000">label</span><span style="color:#000">=</span><span style="color:#c41a16"></span><span style="color:#c41a16">&#34;</span><span style="color:#c41a16">All</span><span style="color:#c41a16">&#34;</span>,
        <span style="color:#000">method</span><span style="color:#000">=</span><span style="color:#c41a16"></span><span style="color:#c41a16">&#34;</span><span style="color:#c41a16">update</span><span style="color:#c41a16">&#34;</span>
        )
)

<span style="color:#177500"># create buttons in list (only one so far)</span>
<span style="color:#000">fig</span><span style="color:#000">.</span><span style="color:#000">update_layout</span>(
    <span style="color:#000">updatemenus</span><span style="color:#000">=</span>[
        <span style="color:#000">go</span><span style="color:#000">.</span><span style="color:#000">layout</span><span style="color:#000">.</span><span style="color:#000">Updatemenu</span>(
            <span style="color:#a90d91">type</span> <span style="color:#000">=</span> <span style="color:#c41a16"></span><span style="color:#c41a16">&#34;</span><span style="color:#c41a16">buttons</span><span style="color:#c41a16">&#34;</span>,
            <span style="color:#000">direction</span><span style="color:#000">=</span><span style="color:#c41a16"></span><span style="color:#c41a16">&#34;</span><span style="color:#c41a16">right</span><span style="color:#c41a16">&#34;</span>,
            <span style="color:#000">pad</span><span style="color:#000">=</span>{<span style="color:#c41a16"></span><span style="color:#c41a16">&#34;</span><span style="color:#c41a16">r</span><span style="color:#c41a16">&#34;</span>: <span style="color:#1c01ce">10</span>, <span style="color:#c41a16"></span><span style="color:#c41a16">&#34;</span><span style="color:#c41a16">t</span><span style="color:#c41a16">&#34;</span>: <span style="color:#1c01ce">10</span>},
            <span style="color:#000">showactive</span><span style="color:#000">=</span><span style="color:#a90d91">True</span>,
            <span style="color:#000">x</span><span style="color:#000">=</span><span style="color:#1c01ce">0</span>,
            <span style="color:#000">xanchor</span><span style="color:#000">=</span><span style="color:#c41a16"></span><span style="color:#c41a16">&#34;</span><span style="color:#c41a16">left</span><span style="color:#c41a16">&#34;</span>,
            <span style="color:#000">y</span><span style="color:#000">=</span><span style="color:#000">button_layer_2_height</span>,
            <span style="color:#000">yanchor</span><span style="color:#000">=</span><span style="color:#c41a16"></span><span style="color:#c41a16">&#34;</span><span style="color:#c41a16">top</span><span style="color:#c41a16">&#34;</span>,
            <span style="color:#000">buttons</span><span style="color:#000">=</span><span style="color:#000">btnlist</span>,
        ),
    ]
)

<span style="color:#000">i</span><span style="color:#000">=</span><span style="color:#1c01ce">1</span>

<span style="color:#177500"># get list of regions sorted by ons region id</span>
<span style="color:#000">regions</span> <span style="color:#000">=</span> <span style="color:#a90d91">list</span>(<span style="color:#000">df_age_eu</span><span style="color:#000">.</span><span style="color:#000">sort_values</span>(<span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">ons_region_id</span><span style="color:#c41a16">&#39;</span>)<span style="color:#000">.</span><span style="color:#000">region_name</span><span style="color:#000">.</span><span style="color:#000">unique</span>())

<span style="color:#177500"># Create a data frame dictionary for regional dfs</span>
<span style="color:#000">regiondict</span> <span style="color:#000">=</span> {<span style="color:#000">region</span> : <span style="color:#000">pd</span><span style="color:#000">.</span><span style="color:#000">DataFrame</span>() <span style="color:#a90d91">for</span> <span style="color:#000">region</span> <span style="color:#000">in</span> <span style="color:#000">regions</span>}

<span style="color:#a90d91">for</span> <span style="color:#000">key</span> <span style="color:#000">in</span> <span style="color:#000">regiondict</span><span style="color:#000">.</span><span style="color:#000">keys</span>():
    <span style="color:#000">regiondict</span>[<span style="color:#000">key</span>] <span style="color:#000">=</span> <span style="color:#000">df_age_eu</span>[:][<span style="color:#000">df_age_eu</span><span style="color:#000">.</span><span style="color:#000">region_name</span> <span style="color:#000">==</span> <span style="color:#000">key</span>]

<span style="color:#177500"># Add Traces and buttons for each region</span>
<span style="color:#a90d91">for</span> <span style="color:#000">region</span>, <span style="color:#000">df</span> <span style="color:#000">in</span> <span style="color:#000">regiondict</span><span style="color:#000">.</span><span style="color:#000">items</span>():

    <span style="color:#000">fig</span><span style="color:#000">.</span><span style="color:#000">add_trace</span>(
        <span style="color:#000">go</span><span style="color:#000">.</span><span style="color:#000">Scatter</span>(
            <span style="color:#000">x</span> <span style="color:#000">=</span> <span style="color:#000">df</span>[<span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">mean_age</span><span style="color:#c41a16">&#39;</span>], 
            <span style="color:#000">y</span> <span style="color:#000">=</span> <span style="color:#000">df</span>[<span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">leave_to_use</span><span style="color:#c41a16">&#39;</span>],
            <span style="color:#000">mode</span><span style="color:#000">=</span><span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">markers</span><span style="color:#c41a16">&#39;</span>, 
            <span style="color:#000">marker</span> <span style="color:#000">=</span> <span style="color:#a90d91">dict</span>(
                <span style="color:#000">colorbar</span> <span style="color:#000">=</span> <span style="color:#a90d91">dict</span>(
                <span style="color:#000">title</span><span style="color:#000">=</span><span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">Result</span><span style="color:#c41a16">&#39;</span>,
                <span style="color:#000">tickvals</span><span style="color:#000">=</span> <span style="color:#000">color_vals</span>,
                <span style="color:#000">ticktext</span><span style="color:#000">=</span> <span style="color:#000">color_names</span>,
                <span style="color:#000">tickfont</span><span style="color:#000">=</span><span style="color:#a90d91">dict</span>(<span style="color:#000">size</span><span style="color:#000">=</span><span style="color:#1c01ce">8</span>),
                <span style="color:#a90d91">len</span><span style="color:#000">=</span><span style="color:#1c01ce">0.2</span>
            ),
            <span style="color:#000">colorscale</span> <span style="color:#000">=</span> <span style="color:#000">colorscale</span>,
            <span style="color:#000">cmin</span><span style="color:#000">=</span><span style="color:#000">cmin</span>,
            <span style="color:#000">cmax</span><span style="color:#000">=</span><span style="color:#000">cmax</span>,
            <span style="color:#000">color</span> <span style="color:#000">=</span> <span style="color:#000">df</span>[<span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">colour</span><span style="color:#c41a16">&#39;</span>],
            <span style="color:#000">showscale</span><span style="color:#000">=</span><span style="color:#a90d91">True</span>), 
            <span style="color:#000">text</span><span style="color:#000">=</span><span style="color:#000">df</span>[<span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">Constituency</span><span style="color:#c41a16">&#39;</span>], 
            <span style="color:#000">hovertemplate</span><span style="color:#000">=</span><span style="color:#000">hvt</span>, 
            <span style="color:#000">customdata</span> <span style="color:#000">=</span> <span style="color:#000">df</span>[<span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">wpp</span><span style="color:#c41a16">&#39;</span>],
            <span style="color:#000">showlegend</span><span style="color:#000">=</span><span style="color:#a90d91">False</span>
        )
    )

    <span style="color:#177500"># re-initialise for this button</span>
    <span style="color:#000">vislist</span> <span style="color:#000">=</span> [<span style="color:#a90d91">False</span>] <span style="color:#000">*</span> <span style="color:#1c01ce">12</span>
    <span style="color:#000">vislist</span>[<span style="color:#000">i</span>] <span style="color:#000">=</span> <span style="color:#a90d91">True</span>    

    <span style="color:#177500"># add new button to list</span>
    <span style="color:#000">btnlist</span><span style="color:#000">.</span><span style="color:#000">append</span>(
        <span style="color:#a90d91">dict</span>(
            <span style="color:#000">args</span><span style="color:#000">=</span>[{<span style="color:#c41a16"></span><span style="color:#c41a16">&#34;</span><span style="color:#c41a16">visible</span><span style="color:#c41a16">&#34;</span>: <span style="color:#000">vislist</span>}],
            <span style="color:#000">label</span><span style="color:#000">=</span><span style="color:#000">region</span>,
            <span style="color:#000">method</span><span style="color:#000">=</span><span style="color:#c41a16"></span><span style="color:#c41a16">&#34;</span><span style="color:#c41a16">update</span><span style="color:#c41a16">&#34;</span>
            )
    )

    <span style="color:#177500"># for each iteration we recreate all the buttons. Not ideal but there </span>
    <span style="color:#177500"># doesn&#39;t seem to be any alternative apart from hard coding the region </span>
    <span style="color:#177500"># names and creating the buttons individually without looping.</span>
    <span style="color:#000">fig</span><span style="color:#000">.</span><span style="color:#000">update_layout</span>(
        <span style="color:#000">updatemenus</span><span style="color:#000">=</span>[
            <span style="color:#000">go</span><span style="color:#000">.</span><span style="color:#000">layout</span><span style="color:#000">.</span><span style="color:#000">Updatemenu</span>(
                <span style="color:#a90d91">type</span> <span style="color:#000">=</span> <span style="color:#c41a16"></span><span style="color:#c41a16">&#34;</span><span style="color:#c41a16">buttons</span><span style="color:#c41a16">&#34;</span>,
                <span style="color:#000">direction</span><span style="color:#000">=</span><span style="color:#c41a16"></span><span style="color:#c41a16">&#34;</span><span style="color:#c41a16">right</span><span style="color:#c41a16">&#34;</span>,
                <span style="color:#000">pad</span><span style="color:#000">=</span>{<span style="color:#c41a16"></span><span style="color:#c41a16">&#34;</span><span style="color:#c41a16">r</span><span style="color:#c41a16">&#34;</span>: <span style="color:#1c01ce">10</span>, <span style="color:#c41a16"></span><span style="color:#c41a16">&#34;</span><span style="color:#c41a16">t</span><span style="color:#c41a16">&#34;</span>: <span style="color:#1c01ce">10</span>},
                <span style="color:#000">showactive</span><span style="color:#000">=</span><span style="color:#a90d91">True</span>,
                <span style="color:#000">x</span><span style="color:#000">=</span><span style="color:#1c01ce">0</span>,
                <span style="color:#000">xanchor</span><span style="color:#000">=</span><span style="color:#c41a16"></span><span style="color:#c41a16">&#34;</span><span style="color:#c41a16">left</span><span style="color:#c41a16">&#34;</span>,
                <span style="color:#000">y</span><span style="color:#000">=</span><span style="color:#000">button_layer_2_height</span>,
                <span style="color:#000">yanchor</span><span style="color:#000">=</span><span style="color:#c41a16"></span><span style="color:#c41a16">&#34;</span><span style="color:#c41a16">top</span><span style="color:#c41a16">&#34;</span>,
                <span style="color:#000">buttons</span><span style="color:#000">=</span><span style="color:#000">btnlist</span>, 
                <span style="color:#000">font</span><span style="color:#000">=</span><span style="color:#a90d91">dict</span>(<span style="color:#000">size</span><span style="color:#000">=</span><span style="color:#1c01ce">10</span>)
            ),
        ]
    )  

    <span style="color:#000">i</span> <span style="color:#000">=</span> <span style="color:#000">i</span> <span style="color:#000">+</span> <span style="color:#1c01ce">1</span>  

<span style="color:#177500"># common to all traces    </span>
<span style="color:#000">fig</span><span style="color:#000">.</span><span style="color:#000">update_layout</span>(
    <span style="color:#000">title</span><span style="color:#000">=</span><span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">&lt;b&gt;Mean age of electorate by constituency leave vote&lt;/b&gt;</span><span style="color:#c41a16">&#39;</span>, 
    <span style="color:#000">title_x</span><span style="color:#000">=</span><span style="color:#1c01ce">0.5</span>,
    <span style="color:#000">xaxis</span><span style="color:#000">=</span>{<span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">title</span><span style="color:#c41a16">&#39;</span>:<span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">Mean age of electorate</span><span style="color:#c41a16">&#39;</span>}, 
    <span style="color:#000">yaxis</span><span style="color:#000">=</span>{<span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">title</span><span style="color:#c41a16">&#39;</span>:<span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">Leave </span><span style="color:#c41a16">%</span><span style="color:#c41a16">&#39;</span>},)

<span style="color:#177500"># add extra explanatory text</span>
<span style="color:#000">fig</span><span style="color:#000">.</span><span style="color:#000">update_layout</span>(
    <span style="color:#000">annotations</span><span style="color:#000">=</span>[
        <span style="color:#000">go</span><span style="color:#000">.</span><span style="color:#000">layout</span><span style="color:#000">.</span><span style="color:#000">Annotation</span>(
            <span style="color:#000">text</span><span style="color:#000">=</span><span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">Seats won by&lt;br&gt;Conservative&lt;br&gt;or Labour</span><span style="color:#c41a16">&#39;</span>,
            <span style="color:#000">align</span><span style="color:#000">=</span><span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">left</span><span style="color:#c41a16">&#39;</span>,
            <span style="color:#000">showarrow</span><span style="color:#000">=</span><span style="color:#a90d91">False</span>,
            <span style="color:#000">xref</span><span style="color:#000">=</span><span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">paper</span><span style="color:#c41a16">&#39;</span>,
            <span style="color:#000">yref</span><span style="color:#000">=</span><span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">paper</span><span style="color:#c41a16">&#39;</span>,
            <span style="color:#000">x</span><span style="color:#000">=</span><span style="color:#1c01ce">1.0</span>,
            <span style="color:#000">y</span><span style="color:#000">=</span><span style="color:#1c01ce">1.0</span>,
            <span style="color:#177500"># bordercolor=&#39;black&#39;,</span>
            <span style="color:#177500"># borderwidth=1,</span>
            <span style="color:#000">font</span><span style="color:#000">=</span><span style="color:#a90d91">dict</span>(<span style="color:#000">size</span><span style="color:#000">=</span><span style="color:#1c01ce">10</span>)
        )
    ]
)

<span style="color:#000">fig</span><span style="color:#000">.</span><span style="color:#000">show</span>()

<span style="color:#a90d91">with</span> <span style="color:#a90d91">open</span>(<span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">plotly_go_meanage_eu_buttons.html</span><span style="color:#c41a16">&#39;</span>, <span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">w</span><span style="color:#c41a16">&#39;</span>) <span style="color:#a90d91">as</span> <span style="color:#000">f</span>:
    <span style="color:#000">f</span><span style="color:#000">.</span><span style="color:#000">write</span>(<span style="color:#000">fig</span><span style="color:#000">.</span><span style="color:#000">to_html</span>(<span style="color:#000">include_plotlyjs</span><span style="color:#000">=</span><span style="color:#c41a16"></span><span style="color:#c41a16">&#39;</span><span style="color:#c41a16">cdn</span><span style="color:#c41a16">&#39;</span>))
</code></pre></td></tr></table>
</div>
</div>
    
<section class="section">
  <div class="container">
    <aside><div id="disqus_thread"></div></aside>
  
    <div id="show_comments"><a id="load_comments" class="button is-link">Load comments</a></div>
  
    <script type="text/javascript">
      var disqus_shortname = 'election-plots';
      function disqus() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      }
  
      
      var hash = window.location.hash.substr(1);
      if ((hash.length > 8) && (hash.substring(0, 8) === "comment-")) {
        disqus();
        document.getElementById("show_comments").style.display = "none";
      } else {
        document.getElementById('load_comments').onclick = function() {
          disqus();
          document.getElementById("show_comments").style.display = "none";
        };
      }
  

    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
  </div>
</section>


</body>
</html>